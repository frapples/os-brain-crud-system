
<template id="x-book-add-form">
<el-dialog title="添加题册" :visible.sync="dialogFormVisible">
        <el-form :model="form">
          <el-form-item label="题册名称">
            <el-input v-model="form.name"></el-input>
          </el-form-item>
          <el-form-item label="题册描述">
            <el-input v-model="form.comment"></el-input>
          </el-form-item>
        </el-form>
        <div slot="footer" class="dialog-footer">
          <el-button @click="dialogFormVisible = false">取 消</el-button>
          <el-button type="primary" @click="onSubmit" :loading="loading">确 定</el-button>
        </div>
      </el-dialog>
</template>

<script>
    Vue.component('x-book-add-form', {
        template: "#x-book-add-form",
        data: function () {
            return {
                form: {
                    name: "",
                    comment: ""
                },
                loading: false,
                dialogFormVisible: false
            };
        },

        methods: {
            open: function () {
                this.dialogFormVisible = true;
            },

            onSubmit: function () {

                network.post("/api/exercise-book", this.form).then((success) => {
                    this.loading = false;
                    this.dialogFormVisible = false;
                    this.$emit("after-added");
                });

            }
        },

    });
</script>